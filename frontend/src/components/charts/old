<template>
    <v-container fluid>
        <h3>Daten für {{ muniDict[selectedMuni] }}, Stand {{ date }}</h3>
        <div class="caption">
            Es werden Daten der zweiten Welle ab 17. September 2020 angezeigt
        </div>
        <v-row class="text-center" >
            <v-col cols="3">
                <Mini
                    small
                    color="#11B8A5"
                    title="7-Tage-Inzidenz"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    prop="incidence"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="6">
                <Mini
                    color="#11B8A5"
                    title="Aktive Fälle"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    prop="active"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="4">
                <BaseChart
                    id="active-chart"
                    prop="active"
                    color="#11B8A5"
                    chartColor="#404040"
                    title="Aktive Fälle"
                    dark
                    :start="selectedMuni=='sr' ? 180 : 20"
                    :loading="!loaded"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="4">
                <BaseChart
                    id="pos-chart"
                    color="#11B8A5"
                    chartColor="#404040"
                    title="Fälle insgesamt"
                    prop="positive"
                    dark
                    :start="selectedMuni=='sr' ? 180 : 20"
                    :loading="!loaded"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="4">
                <BaseChart
                    id="death-chart"
                    color="#EF476F"
                    chartColor="#404040"
                    title="Todesfälle"
                    prop="deaths"
                    dark
                    :loading="!loaded"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="4">
                <BaseChart
                    id="new-death-chart"
                    color="#EF476F"
                    chartColor="#404040"
                    title="Neue Todesfälle"
                    prop="new_deaths"
                    dark
                    :start="selectedMuni=='sr' ? 180 : 20"
                    :loading="!loaded"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="3">
                <Mini
                    small
                    color="#85718D"
                    title="Fälle"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    prop="positive"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="3">
                <Mini
                    small
                    color="#85718D"
                    title="Neue Fälle"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    prop="new"
                    :data="muni_data"
                    description="Neue Fälle pro Tag"
                />
            </v-col>
            <v-col cols="3">
                <Mini
                    small
                    color="#EF476F"
                    title="Todesfälle"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    prop="deaths"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="3">
                <Mini
                    small
                    color="#EF476F"
                    title="Neue Tote"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    prop="new_deaths"
                    :data="muni_data"
                />
            </v-col>
        </v-row>
        <v-row>
            <v-col cols="4">
                <Incidence
                    v-if="muni_data"
                    color="#85718D"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    :data="muni_data"
                />
            </v-col>
            <v-col cols="4">
                <NewCases
                    v-if="muni_data"
                    color="#85718D"
                    dark
                    :start="selectedMuni == 'sr' ? 180 : 20"
                    :loading="!loaded"
                    :data="muni_data"
                />
            </v-col>
        </v-row>
    </v-container>
</template>

<script>
import Incidence from "./charts/Incidence.vue";
import NewCases from "./charts/NewCases.vue";
import BaseChart from "./charts/BaseChart.vue";
import Mini from "./charts/Mini.vue";
import { mapState, mapActions, mapGetters } from "vuex";

import axios from "axios";

const API = process.env.VUE_APP_CORONA_API;

export default {
    name: "CoronaMain",
    data: () => ({
        range: [0, 100],
        secondWave: true,
    }),
    methods: {
        ...mapActions({
            updateMuni: "corona/updateMuni",
        }),
    },
    async mounted() {},
    components: {
        Incidence,
        NewCases,
        BaseChart,
        Mini,
    },
    computed: {
        ...mapGetters("corona", ["muni_data"]),
        ...mapState({
            muniDict: (state) => state.corona.muniDict,
            loaded: (state) => state.corona.loaded,
            munis: (state) => state.corona.munis,
            today: (state) => state.corona.today,
            date: (state) => state.corona.date,
            selectedMuni: (state) => state.corona.selectedMuni,
        }),
    },
};
</script>
